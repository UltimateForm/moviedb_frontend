{"version":3,"sources":["config.js","dataProvider/index.js","models/movies/ListFilters.tsx","models/movies/MovieDetails.tsx","components/RateMovieDialog.tsx","components/SessionValidator.tsx","models/movies/DetailsDialog.tsx","models/movies/List.tsx","models/movies/index.ts","charts/ChartsMain.tsx","customRoutes.tsx","layout/Menu.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["API_ADDRESS","API_KEY","httpClient","fetchUtils","fetchJson","defaultQueryParams","api_key","starndardizeTMDBHorrendousRestResources","resource","params","method","filter","standardizeTMDBHorrendousRestResponses","json","data","results","total","total_results","ids","genres","record","includes","getList","pagination","page","perPage","sort","field","order","console","log","query","sort_by","toLowerCase","flattenObj","obj","parent","res","key","propName","url","stringify","then","headers","getOne","id","getMany","getManyReference","JSON","range","target","update","body","updateMany","create","delete","deleteMany","DiscoverMoviesFilter","props","Filter","TextInput","label","source","alwaysOn","NumberInput","useStyles","makeStyles","root","margin","textAlign","minWidth","slider","marginTop","theme","createStyles","display","details","flexDirection","misc_details","flexWrap","data_field","content","flex","cover","width","MovieDetails","useTheme","DetailsDrawer","history","basePath","path","routeProps","match","isMatch","endsWith","Dialog","open","maxWidth","onClose","push","Show","component","ListPagination","Pagination","rowsPerPageOptions","MovieList","location","List","bulkActionButtons","filters","Datagrid","rowClick","TextField","NumberField","ReferenceArrayField","reference","SingleFieldList","ChipField","DateField","list","name","icon","MovieIcon","options","paperRoot","marginBottom","height","title","Chart","notify","useNotify","classes","useFetch","loading","error","Loading","top10RatedMovies","slice","Paper","className","Typography","variant","color","top","right","left","bottom","dataKey","interval","tick","fontSize","wordWrap","value","position","offset","angle","stroke","fill","exact","ChartsMain","Menu","onMenuClick","logout","useMediaQuery","breakpoints","down","useSelector","state","admin","ui","sidebarOpen","resources","getResources","r","hasList","map","MenuItemLink","to","primaryText","leftIcon","React","createElement","onClick","sidebarIsOpen","App","Admin","menu","customRoutes","dataProvider","Resource","Movie","Boolean","window","hostname","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.4b6cecd8.chunk.js","sourcesContent":["export const API_ADDRESS = \"https://api.themoviedb.org/3\";\r\nexport const API_KEY = \"b22e78df431ee4757d4dde2bbeeb75de\";\r\nexport const MOVIE_DB_IMAGE_PATH = \"https://image.tmdb.org/t/p/w600_and_h900_bestv2\";","import { fetchUtils } from 'react-admin';\r\nimport { stringify } from 'query-string';\r\nimport { API_ADDRESS,API_KEY } from \"../config\";\r\n\r\nconst httpClient = fetchUtils.fetchJson;\r\n\r\nconst defaultQueryParams = {\r\n\t//unsafe, consider package.json\r\n\t//MovieDB api key\r\n\tapi_key: API_KEY\r\n}\r\n\r\n///source https://stackoverflow.com/a/56253298\r\nfunction flattenObj(obj, parent, res = {}) {\r\n\tfor (let key in obj) {\r\n\t\tlet propName = parent ? parent + '.' + key : key;\r\n\t\tif (typeof obj[key] == 'object') {\r\n\t\t\tflattenObj(obj[key], propName, res);\r\n\t\t} else {\r\n\t\t\tres[propName] = obj[key];\r\n\t\t}\r\n\t}\r\n\treturn res;\r\n}\r\n\r\nconst starndardizeTMDBHorrendousRestResources = (resource, params) => {\r\n\tif (resource === \"movie\") {\r\n\t\tconst method = params.filter[\"search\"] ? \"search\" : \"discover\";\r\n\t\treturn `${method}/${resource}`\r\n\t}\r\n\tif (resource === \"movieGenre\") {\r\n\t\treturn \"genre/movie/list\"\r\n\t}\r\n\telse return resource;\r\n}\r\n\r\nconst standardizeTMDBHorrendousRestResponses = (resource, json,params) => {\r\n\tif (resource === \"movie\") {\r\n\t\treturn {\r\n\t\t\tdata: json.results,\r\n\t\t\t//total: parseInt(headers.get('content-range').split('/').pop(), 10),\r\n\t\t\ttotal: json.total_results,\r\n\t\t}\r\n\t}\r\n\tif (resource === \"movieGenre\") {\r\n\t\treturn {\r\n\t\t\tdata: params.ids? json.genres.filter(record=>params.ids.includes(record[\"id\"])):json.genres\r\n\t\t}\r\n\t}\r\n\telse return json;\r\n}\r\n\r\n//this needs to be changed, didnt think moviedb api would be like this haha\r\nexport default {\r\n\tgetList: (resource, params) => {\r\n\t\tconst { page, perPage } = params.pagination;\r\n\t\tconst { field, order } = params.sort;\r\n\t\tconsole.log(field, order)\r\n\t\tconst query = {\r\n\t\t\tsort_by: `${field}.${order.toLowerCase()}`,\r\n\t\t\tpage: page,\r\n\t\t\tquery: params.filter[\"search\"], //dirty? yes but i aint got time right now\r\n\t\t\t//filter: JSON.stringify(params.filter),\r\n\t\t\t...flattenObj(params.filter),\r\n\t\t\t...defaultQueryParams\r\n\t\t};\r\n\r\n\t\tconst url = `${API_ADDRESS}/${starndardizeTMDBHorrendousRestResources(resource, params)}?${stringify(query)}`;\r\n\r\n\t\treturn httpClient(url).then(({ headers, json }) => standardizeTMDBHorrendousRestResponses(resource,json));\r\n\t},\r\n\r\n\tgetOne: (resource, params) => {\r\n\t\tconst query = {\r\n\t\t\t...defaultQueryParams\r\n\t\t};\r\n\t\tconsole.log(\"ugh\");\r\n\t\treturn httpClient(`${API_ADDRESS}/${resource}/${params.id}?${stringify(query)}`).then(({ json }) => ({data:json}));\r\n\t\t// return httpClient(`${API_ADDRESS}/${starndardizeTMDBHorrendousRestResources(resource, params)}/${params.id}?${stringify(query)}`).then(({ json }) => standardizeTMDBHorrendousRestResponses(resource,json));\r\n\t},\r\n\r\n\tgetMany: (resource, params) => {\r\n\t\tconst query = {\r\n\t\t\t...defaultQueryParams\r\n\t\t};\r\n\t\tconst url = `${API_ADDRESS}/${starndardizeTMDBHorrendousRestResources(resource, params)}?${stringify(query)}`;\r\n\t\treturn httpClient(url).then(({ json }) => {\r\n\t\t\treturn standardizeTMDBHorrendousRestResponses(resource, json,params);\r\n\t\t});\r\n\t},\r\n\tgetManyReference: (resource, params) => {\r\n\t\tconst { page, perPage } = params.pagination;\r\n\t\tconst { field, order } = params.sort;\r\n\t\tconst query = {\r\n\t\t\tsort: JSON.stringify([field, order]),\r\n\t\t\trange: JSON.stringify([(page - 1) * perPage, page * perPage - 1]),\r\n\t\t\tfilter: JSON.stringify({\r\n\t\t\t\t...params.filter,\r\n\t\t\t\t[params.target]: params.id,\r\n\t\t\t}),\r\n\t\t\t...defaultQueryParams\r\n\t\t};\r\n\t\tconst url = `${API_ADDRESS}/${starndardizeTMDBHorrendousRestResources(resource, params)}?${stringify(query)}`;\r\n\t\treturn httpClient(url).then(({ headers, json }) =>standardizeTMDBHorrendousRestResponses(resource,json));\r\n\t},\r\n\r\n\tupdate: (resource, params) => {\r\n\t\tconst query = {\r\n\t\t\t...defaultQueryParams\r\n\t\t};\r\n\t\treturn httpClient(`${API_ADDRESS}/${starndardizeTMDBHorrendousRestResources(resource, params)}/${params.id}?${stringify(query)}`, {\r\n\t\t\tmethod: 'PUT',\r\n\t\t\tbody: JSON.stringify(params.data),\r\n\t\t}).then(({ json }) => ({ data: json }));\r\n\t},\r\n\r\n\tupdateMany: (resource, params) => {\r\n\t\tconst query = {\r\n\t\t\tfilter: JSON.stringify({ id: params.ids }),\r\n\t\t\t...defaultQueryParams\r\n\t\t};\r\n\t\treturn httpClient(`${API_ADDRESS}/${starndardizeTMDBHorrendousRestResources(resource, params)}?${stringify(query)}`, {\r\n\t\t\tmethod: 'PUT',\r\n\t\t\tbody: JSON.stringify(params.data),\r\n\t\t}).then(({ json }) => ({ data: json }));\r\n\t},\r\n\r\n\tcreate: (resource, params) => {\r\n\t\tconst query = {\r\n\t\t\t...defaultQueryParams\r\n\t\t};\r\n\t\treturn httpClient(`${API_ADDRESS}/${starndardizeTMDBHorrendousRestResources(resource, params)}?${stringify(query)}`, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify(params.data),\r\n\t\t}).then(({ json }) => ({\r\n\t\t\tdata: { ...params.data, id: json.id },\r\n\t\t}));\r\n\t},\r\n\r\n\tdelete: (resource, params) => {\r\n\t\tconst query = {\r\n\t\t\t...defaultQueryParams\r\n\t\t};\r\n\t\treturn httpClient(`${API_ADDRESS}/${starndardizeTMDBHorrendousRestResources(resource, params)}/${params.id}?${stringify(query)}`, {\r\n\t\t\tmethod: 'DELETE',\r\n\t\t}).then(({ json }) => ({ data: json }));\r\n\t},\r\n\r\n\tdeleteMany: (resource, params) => {\r\n\t\tconst query = {\r\n\t\t\tfilter: JSON.stringify({ id: params.ids }),\r\n\t\t\t...defaultQueryParams\r\n\t\t};\r\n\t\treturn httpClient(`${API_ADDRESS}/${starndardizeTMDBHorrendousRestResources(resource, params)}?${stringify(query)}`, {\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\tbody: JSON.stringify(params.data),\r\n\t\t}).then(({ json }) => ({ data: json }));\r\n\t},\r\n};","import React from \"react\";\r\nimport {\r\n\tFilter,\r\n\tTextInput,\r\n\tNumberInput,\r\n\tBooleanInput,\r\n\tDateInput,\r\n} from \"react-admin\";\r\n\r\nexport const DiscoverMoviesFilter = (props: any) => {\r\n\treturn (\r\n\t\t<Filter {...props}>\r\n\t\t\t<TextInput label=\"Search\" source=\"search\" alwaysOn/>\r\n\t\t\t{/* <TextInput source=\"language\" alwaysOn={false}/>*/}\r\n\t\t\t<TextInput source=\"language\" alwaysOn={false} />\r\n\t\t\t{/* <NumberInput label=\"Year\" source=\"year\" alwaysOn={false} />*/}\r\n\t\t\t<NumberInput source=\"primary_release_year\" alwaysOn={false} />\r\n\r\n\t\t</Filter>\r\n\t);\r\n};\r\n","import React from \"react\";\r\nimport {\r\n\tTheme,\r\n\tcreateStyles,\r\n\tmakeStyles,\r\n\tuseTheme,\r\n} from \"@material-ui/core/styles\";\r\nimport {\r\n\tCard,\r\n\tCardContent,\r\n\tIconButton,\r\n\tCardMedia,\r\n\tTypography,\r\n\tCardHeader,\r\n\tLink,\r\n\tAvatar,\r\n\tChip,\r\n} from \"@material-ui/core\";\r\nimport OpenInNewIcon from \"@material-ui/icons/OpenInNew\";\r\nimport { MOVIE_DB_IMAGE_PATH } from \"../../config\";\r\nimport { useCreateRequestToken } from \"../../hooks\";\r\nimport { RateMovieButton } from \"../../components\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tmarginTop: \"-1em\", //cancel React-Admin's obnoxious margin-top=1em\r\n\t\t},\r\n\t\tdetails: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t},\r\n\t\tmisc_details: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexWrap: \"wrap\",\r\n\t\t},\r\n\t\tdata_field: {\r\n\t\t\tmargin: \"0.5em\",\r\n\t\t},\r\n\t\tcontent: {\r\n\t\t\tflex: \"1 0 auto\",\r\n\t\t},\r\n\t\tcover: {\r\n\t\t\twidth: \"50%\",\r\n\t\t}\r\n\t})\r\n);\r\n\r\nconst DataLabel: React.FC<any> = (props: any) => (\r\n\t<Typography variant=\"subtitle2\" color=\"textSecondary\">\r\n\t\t{props.label}\r\n\t</Typography>\r\n);\r\n\r\nconst MiscDataField: React.FC<any> = (props: any) => {\r\n\tconst { label, format, record, source } = props;\r\n\tconst classes = useStyles();\r\n\tlet value = record[source];\r\n\tif (value === undefined) return <></>; //ugh\r\n\tvalue = format ? format(value) : value;\r\n\treturn (\r\n\t\t<div className={classes.data_field}>\r\n\t\t\t<DataLabel label={label} />\r\n\t\t\t<Typography variant=\"body1\">{value}</Typography>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n///there are other ways but i dont have time\r\nconst Minutes2ReadableDuration = (minutes: number) => {\r\n\tvar num = minutes;\r\n\tvar hours = num / 60;\r\n\tvar rhours = Math.floor(hours);\r\n\tvar minutes = (hours - rhours) * 60;\r\n\tvar rminutes = Math.round(minutes);\r\n\treturn `${rhours}H:${rminutes}M`;\r\n};\r\n\r\nconst MovieDetails: React.FC<any> = (props: any) => {\r\n\tconst { record } = props;\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\t//console.log(\"MovieDetails\", props);\r\n\treturn (\r\n\t\t/* \t\t<SimpleShowLayout {...props}>\r\n\t\t\t<TextField source=\"title\" />\r\n\t\t</SimpleShowLayout> */\r\n\t\t<Card className={classes.root}>\r\n\t\t\t<CardMedia\r\n\t\t\t\tclassName={classes.cover}\r\n\t\t\t\tcomponent=\"img\"\r\n\t\t\t\timage={`${MOVIE_DB_IMAGE_PATH}/${record[\"poster_path\"]}`}\r\n\t\t\t\ttitle=\"Movie Poster Image\"\r\n\t\t\t/>\r\n\t\t\t<div className={classes.details}>\r\n\t\t\t\t<CardHeader\r\n\t\t\t\t\ttitle={record[\"title\"]}\r\n\t\t\t\t\tsubheader={record[\"tagline\"]}\r\n\t\t\t\t\tavatar={\r\n\t\t\t\t\t\t<RateMovieButton record={record}/>\r\n\t\t\t\t\t}\r\n\t\t\t\t\taction={\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\trel=\"noopener\"\r\n\t\t\t\t\t\t\thref={record[\"homepage\"]} //could use react router but in a rush\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<IconButton color=\"primary\">\r\n\t\t\t\t\t\t\t\t<OpenInNewIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<CardContent className={classes.content}>\r\n\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t{record[\"overview\"]}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</CardContent>\r\n\t\t\t\t{record[\"genres\"] && record[\"genres\"].length > 0 && (\r\n\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<DataLabel label=\"Genres\" />\r\n\t\t\t\t\t\t\t{record[\"genres\"].map((genre: any) => (\r\n\t\t\t\t\t\t\t\t<Chip label={genre.name} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</CardContent>\r\n\t\t\t\t)}\r\n\t\t\t\t{record[\"spoken_languages\"] &&\r\n\t\t\t\t\trecord[\"spoken_languages\"].length > 0 && (\r\n\t\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<DataLabel label=\"Spoken Languages\" />\r\n\t\t\t\t\t\t\t\t{record[\"spoken_languages\"].map((lang: any) => (\r\n\t\t\t\t\t\t\t\t\t<Chip label={lang.name} />\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t)}{\" \"}\r\n\t\t\t\t{record[\"production_countries\"] &&\r\n\t\t\t\t\trecord[\"production_countries\"].length > 0 && (\r\n\t\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<DataLabel label=\"Production Countires\" />\r\n\t\t\t\t\t\t\t\t{record[\"production_countries\"].map(\r\n\t\t\t\t\t\t\t\t\t(lang: any) => (\r\n\t\t\t\t\t\t\t\t\t\t<Chip label={lang.name} />\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t)}\r\n\t\t\t\t{record[\"production_countries\"] &&\r\n\t\t\t\t\trecord[\"production_companies\"].length > 0 && (\r\n\t\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<DataLabel label=\"Production Companies\" />\r\n\t\t\t\t\t\t\t\t{record[\"production_companies\"].map(\r\n\t\t\t\t\t\t\t\t\t(lang: any) => (\r\n\t\t\t\t\t\t\t\t\t\t<Chip label={lang.name} />\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t)}\r\n\t\t\t\t<CardContent className={classes.misc_details}>\r\n\t\t\t\t\t<MiscDataField\r\n\t\t\t\t\t\tlabel=\"Status\"\r\n\t\t\t\t\t\trecord={record}\r\n\t\t\t\t\t\tsource=\"status\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<MiscDataField\r\n\t\t\t\t\t\tlabel=\"Release Date\"\r\n\t\t\t\t\t\trecord={record}\r\n\t\t\t\t\t\tsource=\"release_date\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<MiscDataField\r\n\t\t\t\t\t\tlabel=\"Runtime\"\r\n\t\t\t\t\t\trecord={record}\r\n\t\t\t\t\t\tformat={Minutes2ReadableDuration}\r\n\t\t\t\t\t\tsource=\"runtime\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<MiscDataField\r\n\t\t\t\t\t\tlabel=\"Budget\"\r\n\t\t\t\t\t\tsource=\"budget\"\r\n\t\t\t\t\t\trecord={record}\r\n\t\t\t\t\t\tformat={(value: number) =>\r\n\t\t\t\t\t\t\tvalue.toLocaleString(navigator.language, {\r\n\t\t\t\t\t\t\t\tstyle: \"currency\",\r\n\t\t\t\t\t\t\t\tcurrency: \"USD\",\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<MiscDataField\r\n\t\t\t\t\t\tlabel=\"Revenue\"\r\n\t\t\t\t\t\tsource=\"revenue\"\r\n\t\t\t\t\t\trecord={record}\r\n\t\t\t\t\t\tformat={(value: number) =>\r\n\t\t\t\t\t\t\tvalue.toLocaleString(navigator.language, {\r\n\t\t\t\t\t\t\t\tstyle: \"currency\",\r\n\t\t\t\t\t\t\t\tcurrency: \"USD\",\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</CardContent>\r\n\t\t\t</div>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default MovieDetails;\r\n","import React, { useMemo } from \"react\";\r\nimport {\r\n\tDialog,\r\n\tTextField,\r\n\tCircularProgress,\r\n\tmakeStyles,\r\n\tTypography,\r\n\tSlider,\r\n\tButton,\r\n} from \"@material-ui/core\";\r\nimport { showNotification, useNotify } from \"react-admin\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport { API_ADDRESS, API_KEY } from \"../config\";\r\nimport { SessionValidator } from \".\";\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\tmargin: \"1em\",\r\n\t\ttextAlign: \"center\",\r\n\t\tminWidth: \"256px\",\r\n\t},\r\n\tslider: {\r\n\t\tmarginTop: \"40px\",\r\n\t},\r\n});\r\n\r\n// /movie/{movie_id}/rating\r\nconst RaterDialog: React.FC<any> = (props: any) => {\r\n\tconst { open, handleClose, record, ...restPRops } = props;\r\n\treturn (\r\n\t\t<Dialog maxWidth=\"sm\" open={open} onClose={handleClose}>\r\n\t\t\t<SessionValidator>\r\n\t\t\t\t<Rater\r\n\t\t\t\t\tsubmit={handleClose}\r\n\t\t\t\t\tmovie_id={record[\"id\"]}\r\n\t\t\t\t\tmovie_title={record[\"original_title\"]}\r\n\t\t\t\t/>\r\n\t\t\t</SessionValidator>\r\n\t\t</Dialog>\r\n\t);\r\n};\r\nconst Rater: React.FC<any> = (props: any) => {\r\n\tconst { session_id, movie_id, movie_title, submit } = props;\r\n\tconst [saving, setSaving] = React.useState(false);\r\n\tconst notify = useNotify();\r\n\tconst classes = useStyles();\r\n\tconst defaultValue = 5;\r\n\tconst scoreRef = React.useRef({ score: defaultValue }); //to avoid rerenders and other shenanigans\r\n\tconst onScoreChange = (value: number | number[]) => {\r\n\t\tscoreRef.current.score = value as number; //it is a number, its fine\r\n\t};\r\n\tconst saveScore = async () => {\r\n\t\tconsole.log(\"Saving score\", scoreRef.current.score);\r\n\t\tsetSaving(true);\r\n\t\tconst url = `${API_ADDRESS}/movie/${movie_id}/rating?api_key=${API_KEY}&session_id=${session_id}`;\r\n\t\tconst response = await fetch(url, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: { \"Content-Type\": \"application/json;charset=utf-8\" },\r\n\t\t\tbody: JSON.stringify({ value: scoreRef.current.score }),\r\n\t\t});\r\n\t\tif (response.status < 200 || response.status >= 300) {\r\n\t\t\tnotify(\"Error rating movie.\", \"error\");\r\n\t\t} else notify(\"Movie Rated!\");\r\n\t\tsetSaving(false);\r\n\t\tsubmit && submit();\r\n\t};\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t{/* could use a form here but not that serious*/}\r\n\t\t\t<Typography id=\"score-slider\" gutterBottom>\r\n\t\t\t\t{`Score ${movie_title}`}\r\n\t\t\t</Typography>\r\n\t\t\t<Slider\r\n\t\t\t\tclassName={classes.slider}\r\n\t\t\t\tdefaultValue={defaultValue}\r\n\t\t\t\tvalueLabelDisplay=\"on\"\r\n\t\t\t\tonChangeCommitted={(event, value) => onScoreChange(value)}\r\n\t\t\t\tstep={0.5}\r\n\t\t\t\tmin={0.5}\r\n\t\t\t\tmax={10}\r\n\t\t\t/>\r\n\t\t\t<Button\r\n\t\t\t\tdisabled={saving}\r\n\t\t\t\tstartIcon={\r\n\t\t\t\t\tsaving ? (\r\n\t\t\t\t\t\t<CircularProgress size={20} color=\"primary\" />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<SaveIcon />\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tonClick={() => saveScore()}\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t>\r\n\t\t\t\tSave\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default RaterDialog;\r\n","import React from \"react\";\r\nimport {\r\n\tTypography,\r\n\tButton,\r\n\tmakeStyles,\r\n\tLink,\r\n\tCircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { API_ADDRESS, API_KEY } from \"../config\";\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\tmargin: \"1em\",\r\n\t\ttextAlign: \"center\",\r\n\t},\r\n});\r\n\r\n//https://www.themoviedb.org/authenticate/{REQUEST_TOKEN}?redirect_to=http://www.yourapp.com/approved\r\nconst validation_url = \"https://www.themoviedb.org/authenticate\";\r\nconst requestTokenRequestAddress = \"/authentication/token/new\";\r\nconst requestSessioAddress = \"/authentication/session/new\";\r\n\r\nconst Validator: React.FC<any> = (props: any) => {\r\n\tconst { children } = props;\r\n\tconst [waitingFocus, setWaitingFocus] = React.useState(false);\r\n\tconst [loading, setLoading] = React.useState(false);\r\n\tconst [requestToken, setRequestToken] = React.useState<string | undefined>(\r\n\t\tundefined\r\n\t);\r\n\tconst classes = useStyles();\r\n\tconst session_id = window.sessionStorage.getItem(\"session_id\");\r\n\r\n\t//spent too much on this, this is ugly but its the best approach rn\r\n\tReact.useMemo(async () => {\r\n\t\tif (waitingFocus || loading) return;\r\n\t\tif (window.sessionStorage.getItem(\"session_id\")) return;\r\n\t\tsetLoading(true);\r\n\t\tif (!requestToken) {\r\n\t\t\tconst url_request_token = `${API_ADDRESS}${requestTokenRequestAddress}?api_key=${API_KEY}`;\r\n\t\t\tconst response1 = await fetch(url_request_token, {\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"cache-control\": \"no-cache\",\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tif (response1.status < 200 || response1.status >= 300) {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t\treturn Promise.reject(\r\n\t\t\t\t\t\"useRequestToken error \" + response1.statusText\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tconst json1 = await response1.json();\r\n\t\t\tconst request_token = json1.request_token;\r\n\t\t\tsetRequestToken(request_token);\r\n\t\t}\r\n\r\n\t\tconst url_session_id = `${API_ADDRESS}${requestSessioAddress}?api_key=${API_KEY}&request_token=${requestToken}`;\r\n\t\tconst response2 = await fetch(url_session_id, {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"cache-control\": \"no-cache\",\r\n\t\t\t},\r\n\t\t});\r\n\t\tif (response2.status < 200 || response2.status >= 300) {\r\n\t\t\tsetLoading(false);\r\n\t\t\treturn Promise.reject(response2.statusText);\r\n\t\t}\r\n\t\tconst json = await response2.json();\r\n\t\tif (!json.session_id) {\r\n\t\t\tconsole.error(\"useSession error\", response2.statusText);\r\n\t\t\tsetLoading(false);\r\n\t\t\treturn Promise.reject(json.status_message);\r\n\t\t}\r\n\t\twindow.sessionStorage.setItem(\"session_id\", json.session_id);\r\n\t\treturn Promise.resolve(json.session_id);\r\n\t}, [waitingFocus, session_id]);\r\n\r\n\tReact.useLayoutEffect(() => {\r\n\t\tconst setWaitingFalse = () => {\r\n\t\t\tconsole.log(\"focusin\");\r\n\t\t\tsetWaitingFocus(false);\r\n\t\t};\r\n\t\twindow.addEventListener(\"focusin\", setWaitingFalse);\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener(\"focusin\", setWaitingFalse);\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst current_page = window.location.href; //this could be problematic, if it is, we can use react-router's thing coming from react-admin\r\n\r\n\tif (!session_id) {\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<Typography variant=\"body1\" color=\"textPrimary\">\r\n\t\t\t\t\tTo score this movie you must validate your session at\r\n\t\t\t\t\tTheMovieDB first\r\n\t\t\t\t</Typography>\r\n\t\t\t\t{waitingFocus || loading ? (\r\n\t\t\t\t\t<CircularProgress color=\"primary\" />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Link\r\n\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\trel=\"noopener\"\r\n\t\t\t\t\t\thref={`${validation_url}/${requestToken}`} //redirect doesnt work of course, why would it work :)\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetWaitingFocus(true);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tValidate at TMBD\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{React.Children.map(children, (child) =>\r\n\t\t\t\tReact.cloneElement(child, {\r\n\t\t\t\t\t...child.props,\r\n\t\t\t\t\tsession_id:session_id\r\n\t\t\t\t})\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\nexport default Validator;\r\n","import React from \"react\";\r\nimport { Route } from \"react-router\";\r\nimport { Dialog } from \"@material-ui/core\";\r\nimport MovieDetails from \"./MovieDetails\";\r\nimport { Show } from \"react-admin\";\r\n\r\nconst DetailsDrawer: React.FC<any> = (props: any) => {\r\n\tconst { resource, history, basePath } = props;\r\n\tconsole.log(props);\r\n\treturn (\r\n\t\t<Route path={`${basePath}/:id/show`}>\r\n\t\t\t{(routeProps) => {\r\n\t\t\t\tconst { match } = routeProps;\r\n\t\t\t\tconst isMatch: boolean =\r\n\t\t\t\t\tmatch !== null && match.path.endsWith(\"show\");\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Dialog\r\n\t\t\t\t\t\topen={isMatch}\r\n\t\t\t\t\t\tmaxWidth=\"md\"\r\n\t\t\t\t\t\tonClose={() => history.push(basePath)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{isMatch ? (\r\n\t\t\t\t\t\t\t<Show {...props} id={match?.params?.id} component=\"div\">\r\n\t\t\t\t\t\t\t\t<MovieDetails />\r\n\t\t\t\t\t\t\t</Show>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t</Dialog>\r\n\t\t\t\t);\r\n\t\t\t}}\r\n\t\t</Route>\r\n\t);\r\n};\r\n\r\nexport default DetailsDrawer;\r\n","import React from \"react\";\r\nimport {\r\n\tNumberField,\r\n\tBooleanField,\r\n\tTextField,\r\n\tReferenceArrayField,\r\n\tDateField,\r\n\tDatagrid,\r\n\tList,\r\n\tSingleFieldList,\r\n\tChipField,\r\n\tPagination\r\n} from \"react-admin\";\r\nimport { DiscoverMoviesFilter } from \"./ListFilters\";\r\nimport DetailsDrawer from \"./DetailsDialog\";\r\n\r\nconst ListPagination = (props:any) => <Pagination rowsPerPageOptions={[]} {...props} />;\r\n\r\n\r\nconst MovieList = (props: any) => {\r\n\tconst { location, basePath, resource, history } = props;\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<List {...props} bulkActionButtons={false}  pagination={<ListPagination />} sort={{ field: 'popularity', order: 'DESC' }} filters={<DiscoverMoviesFilter />} perPage={20}>\r\n\t\t\t\t<Datagrid rowClick=\"show\">\r\n\t\t\t\t\t<TextField source=\"id\" />\r\n\t\t\t\t\t<TextField source=\"title\" />\r\n\t\t\t\t\t<NumberField source=\"popularity\" />\r\n\r\n\t\t\t\t\t<ReferenceArrayField\r\n\t\t\t\t\t\tsource=\"genre_ids\"\r\n\t\t\t\t\t\treference=\"movieGenre\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SingleFieldList>\r\n\t\t\t\t\t\t\t<ChipField source=\"name\" />\r\n\t\t\t\t\t\t</SingleFieldList>\r\n\t\t\t\t\t</ReferenceArrayField>\r\n\t\t\t\t\t<NumberField source=\"vote_average\" />\r\n\t\t\t\t\t<TextField source=\"overview\" />\r\n\t\t\t\t\t<DateField source=\"release_date\" />\r\n\t\t\t\t</Datagrid>\r\n\t\t\t</List>\r\n\t\t\t<DetailsDrawer {...props}/>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default MovieList;\r\n","import List from \"./List\";\r\nimport MovieIcon from '@material-ui/icons/Movie';\r\n\r\nexport default {\r\n\tlist:List,\r\n\tname:\"movie\",\r\n\ticon:MovieIcon,\r\n\toptions:{label:\"Movies\"}\r\n}","import React from \"react\";\r\nimport useFetch from \"use-http\";\r\nimport { API_ADDRESS, API_KEY } from \"../config\";\r\nimport { Loading, useNotify } from \"react-admin\";\r\nimport { Paper, makeStyles, Typography } from \"@material-ui/core\";\r\nimport {\r\n\tBarChart,\r\n\tXAxis,\r\n\tYAxis,\r\n\tCartesianGrid,\r\n\tLine,\r\n\tBar,\r\n\tTooltip,\r\n\tResponsiveContainer,\r\n} from \"recharts\";\r\nconst tmdbTopRatedUrl = \"/movie/top_rated\";\r\n\r\nconst useStyles = makeStyles({\r\n\tpaperRoot: {\r\n\t\tmarginBottom: \"1em\",\r\n\t\tdisplay: \"flex\",\r\n\t\theight: \"100%\",\r\n\t\tflexDirection: \"column\",\r\n\t\ttextAlign: \"center\",\r\n\t},\r\n\ttitle: {\r\n\t\tmargin: \"0.25em\",\r\n\t},\r\n});\r\nconst Chart: React.FC = (props: any) => {\r\n\tconst notify = useNotify();\r\n\tconst classes = useStyles();\r\n\tconst url = `${API_ADDRESS}${tmdbTopRatedUrl}?api_key=${API_KEY}`;\r\n\tconst { loading, error, data } = useFetch(url, { method: \"GET\" }, []);\r\n\tif (loading) {\r\n\t\treturn <Loading />;\r\n\t}\r\n\tconsole.log(error);\r\n\tif (error && error.name) {\r\n\t\tnotify(error.name, \"error\");\r\n\t\treturn <div>An error occured ahah</div>;\r\n\t}\r\n\tconst topRatedMovies: any[] = data.results;\r\n\tconst top10RatedMovies = topRatedMovies.slice(0, 10);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Paper className={classes.paperRoot}>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tclassName={classes.title}\r\n\t\t\t\t\tvariant=\"body1\"\r\n\t\t\t\t\tcolor=\"textPrimary\"\r\n\t\t\t\t>\r\n\t\t\t\t\tScore x Movie\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<ResponsiveContainer width=\"100%\" height={400}>\r\n\t\t\t\t\t<BarChart\r\n\t\t\t\t\t\tdata={top10RatedMovies}\r\n\t\t\t\t\t\tmargin={{ top: 5, right: 20, left: 10, bottom: 5 }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<XAxis\r\n\t\t\t\t\t\t\tdataKey=\"original_title\"\r\n\t\t\t\t\t\t\tinterval={0}\r\n\t\t\t\t\t\t\ttick={{ fontSize: \"10px\", wordWrap: \"ellipsis\" }}\r\n\t\t\t\t\t\t\tlabel={{\r\n\t\t\t\t\t\t\t\tvalue: \"Title\",\r\n\t\t\t\t\t\t\t\tposition: \"center\",\r\n\t\t\t\t\t\t\t\toffset: 900,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<YAxis\r\n\t\t\t\t\t\t\tlabel={{\r\n\t\t\t\t\t\t\t\tvalue: \"Average Score\",\r\n\t\t\t\t\t\t\t\tangle: -90,\r\n\t\t\t\t\t\t\t\tposition: \"center\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Tooltip />\r\n\t\t\t\t\t\t<CartesianGrid stroke=\"#f5f5f5\" />\r\n\t\t\t\t\t\t<Bar dataKey=\"vote_average\" fill=\"#8884d8\" />\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t</ResponsiveContainer>\r\n\t\t\t</Paper>\r\n\t\t\t<Paper className={classes.paperRoot}>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tclassName={classes.title}\r\n\t\t\t\t\tvariant=\"body1\"\r\n\t\t\t\t\tcolor=\"textPrimary\"\r\n\t\t\t\t>\r\n\t\t\t\t\tVote Count x Movie\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<ResponsiveContainer width=\"100%\" height={400}>\r\n\t\t\t\t\t<BarChart\r\n\t\t\t\t\t\twidth={720}\r\n\t\t\t\t\t\theight={360}\r\n\t\t\t\t\t\tdata={top10RatedMovies}\r\n\t\t\t\t\t\tmargin={{ top: 5, right: 20, left: 10, bottom: 5 }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<XAxis\r\n\t\t\t\t\t\t\tdataKey=\"original_title\"\r\n\t\t\t\t\t\t\tinterval={0}\r\n\t\t\t\t\t\t\ttick={{ fontSize: \"10px\", wordWrap: \"ellipsis\" }}\r\n\t\t\t\t\t\t\tlabel={{\r\n\t\t\t\t\t\t\t\tvalue: \"Title\",\r\n\t\t\t\t\t\t\t\tposition: \"center\",\r\n\t\t\t\t\t\t\t\toffset: 900,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<YAxis\r\n\t\t\t\t\t\t\tlabel={{\r\n\t\t\t\t\t\t\t\tvalue: \"Vote Count\",\r\n\t\t\t\t\t\t\t\tangle: -90,\r\n\t\t\t\t\t\t\t\tposition: \"insideLeft\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Tooltip />\r\n\t\t\t\t\t\t<CartesianGrid stroke=\"#f5f5f5\" />\r\n\t\t\t\t\t\t<Bar dataKey=\"vote_count\" fill=\"#8884d8\" />\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t</ResponsiveContainer>\r\n\t\t\t</Paper>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Chart;\r\n","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport { ChartsMain } from \"./charts\";\r\n\r\nexport default [\r\n    <Route exact path=\"/charts\" component={ChartsMain} />\r\n];","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useMediaQuery, Theme } from '@material-ui/core';\r\nimport { MenuItemLink, getResources } from 'react-admin';\r\nimport { withRouter } from 'react-router-dom';\r\nimport InsertChartIcon from '@material-ui/icons/InsertChart';\r\n\r\nconst Menu:React.FC<any> = (props:any) => {\r\n\tconst { onMenuClick, logout } = props;\r\n    const isXSmall = useMediaQuery((theme:Theme) => theme.breakpoints.down('xs'));\r\n    const open = useSelector((state:any) => state.admin.ui.sidebarOpen); //i dont have their type at hand\r\n\tconst resources:any = useSelector(getResources);\r\n    return (\r\n        <div>\r\n            {resources.filter((r:any)=>r.hasList).map((resource:any) => (\r\n                <MenuItemLink\r\n                    key={resource.name}\r\n                    to={`/${resource.name}`}\r\n                    primaryText={resource.options && resource.options.label || resource.name}\r\n                    leftIcon={resource.icon&&React.createElement(resource.icon)}\r\n                    onClick={onMenuClick}\r\n                    sidebarIsOpen={open}\r\n                />\r\n            ))}\r\n            <MenuItemLink\r\n                to=\"/charts\"\r\n                primaryText=\"Charts\"\r\n                leftIcon={<InsertChartIcon />}\r\n                onClick={onMenuClick}\r\n                sidebarIsOpen={open}\r\n            />\r\n        </div>\r\n    );\r\n}\r\nexport default Menu;\r\n/* export default withRouter(Menu); */","import React from \"react\";\nimport { Admin, Resource, ListGuesser } from \"react-admin\";\nimport dataProvider from \"./dataProvider\";\nimport Movie from \"./models/movies\";\nimport customRoutes from \"./customRoutes\";\nimport { Menu } from \"./layout\";\n\nconst App = () => (\n\t<Admin menu={Menu} customRoutes={customRoutes} dataProvider={dataProvider}>\n\t\t<Resource {...Movie} />\n\t\t<Resource name=\"movieGenre\" />\n\t</Admin>\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}