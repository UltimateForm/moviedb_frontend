(this.webpackJsonpMovieDBFrontEnd=this.webpackJsonpMovieDBFrontEnd||[]).push([[0],{457:function(e,t,a){e.exports=a(703)},462:function(e,t,a){},703:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),c=a.n(o),i=(a(462),a(788)),l=a(787),s=a(174),u=a(47),m=a(209),d=a(43),f="https://api.themoviedb.org/3",p="b22e78df431ee4757d4dde2bbeeb75de",g=m.a.fetchJson,E={api_key:p};var v=function(e,t){if("movie"===e){var a=t.filter.search?"search":"discover";return"".concat(a,"/").concat(e)}return"movieGenre"===e?"genre/movie/list":e},b=function(e,t,a){return"movie"===e?{data:t.results,total:t.total_results}:"movieGenre"===e?{data:a.ids?t.genres.filter((function(e){return a.ids.includes(e.id)})):t.genres}:t},h={getList:function(e,t){var a=t.pagination,n=a.page,r=(a.perPage,t.sort),o=r.field,c=r.order,i=Object(u.a)({sort_by:"".concat(o,".").concat(c.toLowerCase()),page:n,query:t.filter.search},function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var r in t){var o=a?a+"."+r:r;"object"==typeof t[r]?e(t[r],o,n):n[o]=t[r]}return n}(t.filter),{},E),l="".concat(f,"/").concat(v(e,t),"?").concat(Object(d.stringify)(i));return g(l).then((function(t){t.headers;var a=t.json;return b(e,a)}))},getOne:function(e,t){var a=Object(u.a)({},E);return g("".concat(f,"/").concat(e,"/").concat(t.id,"?").concat(Object(d.stringify)(a))).then((function(e){return{data:e.json}}))},getMany:function(e,t){var a=Object(u.a)({},E),n="".concat(f,"/").concat(v(e,t),"?").concat(Object(d.stringify)(a));return g(n).then((function(a){var n=a.json;return b(e,n,t)}))},getManyReference:function(e,t){var a=t.pagination,n=a.page,r=a.perPage,o=t.sort,c=o.field,i=o.order,l=Object(u.a)({sort:JSON.stringify([c,i]),range:JSON.stringify([(n-1)*r,n*r-1]),filter:JSON.stringify(Object(u.a)({},t.filter,Object(s.a)({},t.target,t.id)))},E),m="".concat(f,"/").concat(v(e,t),"?").concat(Object(d.stringify)(l));return g(m).then((function(t){t.headers;var a=t.json;return b(e,a)}))},update:function(e,t){var a=Object(u.a)({},E);return g("".concat(f,"/").concat(v(e,t),"/").concat(t.id,"?").concat(Object(d.stringify)(a)),{method:"PUT",body:JSON.stringify(t.data)}).then((function(e){return{data:e.json}}))},updateMany:function(e,t){var a=Object(u.a)({filter:JSON.stringify({id:t.ids})},E);return g("".concat(f,"/").concat(v(e,t),"?").concat(Object(d.stringify)(a)),{method:"PUT",body:JSON.stringify(t.data)}).then((function(e){return{data:e.json}}))},create:function(e,t){var a=Object(u.a)({},E);return g("".concat(f,"/").concat(v(e,t),"?").concat(Object(d.stringify)(a)),{method:"POST",body:JSON.stringify(t.data)}).then((function(e){var a=e.json;return{data:Object(u.a)({},t.data,{id:a.id})}}))},delete:function(e,t){var a=Object(u.a)({},E);return g("".concat(f,"/").concat(v(e,t),"/").concat(t.id,"?").concat(Object(d.stringify)(a)),{method:"DELETE"}).then((function(e){return{data:e.json}}))},deleteMany:function(e,t){var a=Object(u.a)({filter:JSON.stringify({id:t.ids})},E);return g("".concat(f,"/").concat(v(e,t),"?").concat(Object(d.stringify)(a)),{method:"DELETE",body:JSON.stringify(t.data)}).then((function(e){return{data:e.json}}))}},y=a(391),O=a(789),j=a(790),_=a(779),w=a(780),x=a(797),k=a(798),S=a(782),C=a(783),N=a(792),T=a(796),P=a(768),M=function(e){return r.a.createElement(N.a,e,r.a.createElement(T.a,{label:"Search",source:"search",alwaysOn:!0}),r.a.createElement(T.a,{source:"language",alwaysOn:!1}),r.a.createElement(P.a,{source:"primary_release_year",alwaysOn:!1}))},D=a(28),J=a(769),L=a(143),B=a(802),R=a(30),I=a(48),W=a(771),G=a(772),A=a(773),F=a(770),q=a(395),K=a(774),U=a(718),V=a(355),z=a.n(V),H=a(90),$=a(800),Q=function(e){var t=e.record,a=r.a.useState(!1),n=Object(H.a)(a,2),o=n[0],c=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{color:"primary",onClick:function(){c((function(e){return!e}))}},t.vote_average),r.a.createElement(se,{record:t,open:o,handleClose:function(){c(!1)}}))},X=a(124),Y=a.n(X),Z=a(189),ee=a(394),te=a(801),ae=a(706),ne=a(708),re=a(349),oe=a(354),ce=a.n(oe),ie=Object(L.a)({root:{margin:"1em",textAlign:"center",minWidth:"256px"},slider:{marginTop:"40px"}}),le=function(e){var t=e.session_id,a=e.movie_id,n=e.movie_title,o=e.submit,c=r.a.useState(!1),i=Object(H.a)(c,2),l=i[0],s=i[1],u=Object(re.a)(),m=ie(),d=r.a.useRef({score:5}),g=function(){var e=Object(Z.a)(Y.a.mark((function e(){var n,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),n="".concat(f,"/movie/").concat(a,"/rating?api_key=").concat(p,"&session_id=").concat(t),e.next=4,fetch(n,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({value:d.current.score})});case 4:(r=e.sent).status<200||r.status>=300?u("Error rating movie.","error"):u("Movie Rated!"),s(!1),o&&o();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:m.root},r.a.createElement(I.a,{id:"score-slider",gutterBottom:!0},"Score ".concat(n)),r.a.createElement(te.a,{className:m.slider,defaultValue:5,valueLabelDisplay:"on",onChangeCommitted:function(e,t){return function(e){d.current.score=e}(t)},step:.5,min:.5,max:10}),r.a.createElement(ae.a,{disabled:l,startIcon:l?r.a.createElement(ne.a,{size:20,color:"primary"}):r.a.createElement(ce.a,null),color:"primary",onClick:function(){return g()},variant:"contained"},"Save"))},se=function(e){var t=e.open,a=e.handleClose,n=e.record;Object(ee.a)(e,["open","handleClose","record"]);return r.a.createElement(J.a,{maxWidth:"sm",open:t,onClose:a},r.a.createElement(me,null,r.a.createElement(le,{submit:a,movie_id:n.id,movie_title:n.original_title})))},ue=Object(L.a)({root:{margin:"1em",textAlign:"center"}}),me=function(e){var t=e.children,a=r.a.useState(!1),n=Object(H.a)(a,2),o=n[0],c=n[1],i=r.a.useState(!1),l=Object(H.a)(i,2),s=l[0],m=l[1],d=r.a.useState(void 0),g=Object(H.a)(d,2),E=g[0],v=g[1],b=ue(),h=window.sessionStorage.getItem("session_id");r.a.useMemo(Object(Z.a)(Y.a.mark((function e(){var t,a,n,r,c,i,l;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o&&!s){e.next=2;break}return e.abrupt("return");case 2:if(!window.sessionStorage.getItem("session_id")){e.next=4;break}return e.abrupt("return");case 4:if(m(!0),E){e.next=18;break}return t="".concat(f).concat("/authentication/token/new","?api_key=").concat(p),e.next=9,fetch(t,{method:"GET",headers:{"cache-control":"no-cache"}});case 9:if(!((a=e.sent).status<200||a.status>=300)){e.next=13;break}return m(!1),e.abrupt("return",Promise.reject("useRequestToken error "+a.statusText));case 13:return e.next=15,a.json();case 15:n=e.sent,r=n.request_token,v(r);case 18:return c="".concat(f).concat("/authentication/session/new","?api_key=").concat(p,"&request_token=").concat(E),e.next=21,fetch(c,{method:"GET",headers:{"cache-control":"no-cache"}});case 21:if(!((i=e.sent).status<200||i.status>=300)){e.next=25;break}return m(!1),e.abrupt("return",Promise.reject(i.statusText));case 25:return e.next=27,i.json();case 27:if((l=e.sent).session_id){e.next=32;break}return console.error("useSession error",i.statusText),m(!1),e.abrupt("return",Promise.reject(l.status_message));case 32:return window.sessionStorage.setItem("session_id",l.session_id),e.abrupt("return",Promise.resolve(l.session_id));case 34:case"end":return e.stop()}}),e)}))),[o,h]),r.a.useLayoutEffect((function(){var e=function(){c(!1)};return window.addEventListener("focusin",e),function(){window.removeEventListener("focusin",e)}}),[]);window.location.href;return h?r.a.createElement(r.a.Fragment,null,r.a.Children.map(t,(function(e){return r.a.cloneElement(e,Object(u.a)({},e.props,{session_id:h}))}))):r.a.createElement("div",{className:b.root},r.a.createElement(I.a,{variant:"body1",color:"textPrimary"},"To score this movie you must validate your session at TheMovieDB first"),o||s?r.a.createElement(ne.a,{color:"primary"}):r.a.createElement(F.a,{target:"_blank",rel:"noopener",href:"".concat("https://www.themoviedb.org/authenticate","/").concat(E)},r.a.createElement(ae.a,{variant:"contained",color:"primary",onClick:function(){c(!0)}},"Validate at TMBD")))},de=Object(L.a)((function(e){return Object(B.a)({root:{display:"flex",marginTop:"-1em"},details:{display:"flex",flexDirection:"column"},misc_details:{display:"flex",flexWrap:"wrap"},data_field:{margin:"0.5em"},content:{flex:"1 0 auto"},cover:{width:"50%"}})})),fe=function(e){return r.a.createElement(I.a,{variant:"subtitle2",color:"textSecondary"},e.label)},pe=function(e){var t=e.label,a=e.format,n=e.record,o=e.source,c=de(),i=n[o];return void 0===i?r.a.createElement("div",null):(i=a?a(i):i,r.a.createElement("div",{className:c.data_field},r.a.createElement(fe,{label:t}),r.a.createElement(I.a,{variant:"body1"},i)))},ge=function(e){var t=e/60,a=Math.floor(t),n=(e=60*(t-a),Math.round(e));return"".concat(a,"H:").concat(n,"M")},Ee=function(e){var t=e.record,a=de();Object(R.a)();return console.log("MovieDetails render"),r.a.createElement(W.a,{className:a.root},r.a.createElement(G.a,{className:a.cover,component:"img",image:"".concat("https://image.tmdb.org/t/p/w600_and_h900_bestv2","/").concat(t.poster_path),title:"Movie Poster Image"}),r.a.createElement("div",{className:a.details},r.a.createElement(A.a,{title:t.title,subheader:t.tagline,avatar:r.a.createElement(Q,{record:t}),action:r.a.createElement(F.a,{target:"_blank",rel:"noopener",href:t.homepage},r.a.createElement(q.a,{color:"primary"},r.a.createElement(z.a,null)))}),r.a.createElement(K.a,{className:a.content},r.a.createElement(I.a,{variant:"body1"},t.overview)),t.genres&&t.genres.length>0&&r.a.createElement(K.a,null,r.a.createElement("div",null,r.a.createElement(fe,{label:"Genres"}),t.genres.map((function(e){return r.a.createElement(U.a,{label:e.name})})))),t.spoken_languages&&t.spoken_languages.length>0&&r.a.createElement(K.a,null,r.a.createElement("div",null,r.a.createElement(fe,{label:"Spoken Languages"}),t.spoken_languages.map((function(e){return r.a.createElement(U.a,{label:e.name})}))))," ",t.production_countries&&t.production_countries.length>0&&r.a.createElement(K.a,null,r.a.createElement("div",null,r.a.createElement(fe,{label:"Production Countires"}),t.production_countries.map((function(e){return r.a.createElement(U.a,{label:e.name})})))),t.production_countries&&t.production_companies.length>0&&r.a.createElement(K.a,null,r.a.createElement("div",null,r.a.createElement(fe,{label:"Production Companies"}),t.production_companies.map((function(e){return r.a.createElement(U.a,{label:e.name})})))),r.a.createElement(K.a,{className:a.misc_details},r.a.createElement(pe,{label:"Status",record:t,source:"status"}),r.a.createElement(pe,{label:"Release Date",record:t,source:"release_date"}),r.a.createElement(pe,{label:"Runtime",record:t,format:ge,source:"runtime"}),r.a.createElement(pe,{label:"Budget",source:"budget",record:t,format:function(e){return e.toLocaleString(navigator.language,{style:"currency",currency:"USD"})}}),r.a.createElement(pe,{label:"Revenue",source:"revenue",record:t,format:function(e){return e.toLocaleString(navigator.language,{style:"currency",currency:"USD"})}}))))},ve=a(793),be=function(e){return r.a.createElement("span",null,e.record?": ".concat(e.record.original_title):"")},he=function(e){e.resource;var t=e.history,a=e.basePath;return console.log("DetailsDrawer render"),r.a.createElement(D.b,{path:"".concat(a,"/:id/show")},(function(n){var o,c=n.match,i=null!==c&&c.path.endsWith("show");return r.a.createElement(J.a,{open:i,maxWidth:"md",onClose:function(){return t.push(a)}},i?r.a.createElement(ve.a,Object.assign({},e,{title:r.a.createElement(be,null),id:null===c||void 0===c||null===(o=c.params)||void 0===o?void 0:o.id,component:"div"}),r.a.createElement(Ee,null)):r.a.createElement("div",null))}))},ye=function(e){return r.a.createElement(y.a,Object.assign({rowsPerPageOptions:[]},e))},Oe=function(e){e.location,e.basePath,e.resource,e.history;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,Object.assign({},e,{bulkActionButtons:!1,pagination:r.a.createElement(ye,null),sort:{field:"popularity",order:"DESC"},filters:r.a.createElement(M,null),perPage:20}),r.a.createElement(j.a,{rowClick:"show"},r.a.createElement(_.a,{source:"id"}),r.a.createElement(_.a,{source:"title"}),r.a.createElement(w.a,{source:"popularity"}),r.a.createElement(x.a,{source:"genre_ids",reference:"movieGenre"},r.a.createElement(k.a,null,r.a.createElement(S.a,{source:"name"}))),r.a.createElement(w.a,{source:"vote_average"}),r.a.createElement(_.a,{source:"overview"}),r.a.createElement(C.a,{source:"release_date"}))),r.a.createElement(he,e))},je=a(367),_e={list:Oe,name:"movie",icon:a.n(je).a,options:{label:"Movies"}},we=a(171),xe=a.n(we),ke=a(784),Se=a(396),Ce=a(44),Ne=Object(L.a)({paperRoot:{marginBottom:"1em",display:"flex",height:"100%",flexDirection:"column",textAlign:"center"},title:{margin:"0.25em"}}),Te=function(e){var t=Object(re.a)(),a=Ne(),n="".concat(f).concat("/movie/top_rated","?api_key=").concat(p),o=xe()(n,{method:"GET"},[]),c=o.loading,i=o.error,l=o.data;if(c)return r.a.createElement(ke.a,null);if(i&&i.name)return t(i.name,"error"),r.a.createElement("div",null,"An error occured ahah");var s=l.results.slice(0,10);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Se.a,{className:a.paperRoot},r.a.createElement(I.a,{className:a.title,variant:"body1",color:"textPrimary"},"Score x Movie"),r.a.createElement(Ce.d,{width:"100%",height:400},r.a.createElement(Ce.b,{data:s,margin:{top:5,right:20,left:10,bottom:5}},r.a.createElement(Ce.f,{dataKey:"original_title",interval:0,tick:{fontSize:"10px",wordWrap:"ellipsis"},label:{value:"Title",position:"center",offset:900}}),r.a.createElement(Ce.g,{label:{value:"Average Score",angle:-90,position:"center"}}),r.a.createElement(Ce.e,null),r.a.createElement(Ce.c,{stroke:"#f5f5f5"}),r.a.createElement(Ce.a,{dataKey:"vote_average",fill:"#8884d8"})))),r.a.createElement(Se.a,{className:a.paperRoot},r.a.createElement(I.a,{className:a.title,variant:"body1",color:"textPrimary"},"Vote Count x Movie"),r.a.createElement(Ce.d,{width:"100%",height:400},r.a.createElement(Ce.b,{width:720,height:360,data:s,margin:{top:5,right:20,left:10,bottom:5}},r.a.createElement(Ce.f,{dataKey:"original_title",interval:0,tick:{fontSize:"10px",wordWrap:"ellipsis"},label:{value:"Title",position:"center",offset:900}}),r.a.createElement(Ce.g,{label:{value:"Vote Count",angle:-90,position:"insideLeft"}}),r.a.createElement(Ce.e,null),r.a.createElement(Ce.c,{stroke:"#f5f5f5"}),r.a.createElement(Ce.a,{dataKey:"vote_count",fill:"#8884d8"})))))},Pe=[r.a.createElement(D.b,{exact:!0,path:"/charts",component:Te})],Me=a(8),De=a(704),Je=a(389),Le=a(196),Be=a(377),Re=a.n(Be),Ie=function(e){var t=e.onMenuClick,a=(e.logout,Object(De.a)((function(e){return e.breakpoints.down("xs")})),Object(Me.f)((function(e){return e.admin.ui.sidebarOpen}))),n=Object(Me.f)(Je.b);return r.a.createElement("div",null,n.filter((function(e){return e.hasList})).map((function(e){return r.a.createElement(Le.a,{key:e.name,to:"/".concat(e.name),primaryText:e.options&&e.options.label||e.name,leftIcon:e.icon&&r.a.createElement(e.icon),onClick:t,sidebarIsOpen:a})})),r.a.createElement(Le.a,{to:"/charts",primaryText:"Charts",leftIcon:r.a.createElement(Re.a,null),onClick:t,sidebarIsOpen:a}))},We=a(392),Ge=a(794),Ae=function(e){return r.a.createElement(We.a,Object.assign({},e,{userMenu:r.a.createElement("div",null)}))},Fe=function(e){return r.a.createElement(Ge.a,Object.assign({},e,{appBar:Ae,menu:Ie}))},qe=function(){return r.a.createElement(i.a,{layout:Fe,customRoutes:Pe,dataProvider:h},r.a.createElement(l.a,_e),r.a.createElement(l.a,{name:"movieGenre"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(qe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[457,1,2]]]);
//# sourceMappingURL=main.80e7a091.chunk.js.map